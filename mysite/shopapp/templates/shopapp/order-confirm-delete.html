{% extends 'shopapp/base.html' %}

{% block title %}
Delete Order #{{ order.pk }}
{% endblock %}

{% block body %}
<h1>Delete Order #{{ order.pk }}</h1>

<div style="background-color: #ffebee; padding: 20px; border: 1px solid #f44336; margin: 20px 0;">
    <h2>⚠️ Warning</h2>
    <p><strong>Are you sure you want to delete this order?</strong></p>

    <div>
        <h3>Order Details:</h3>
        <p><strong>Order ID:</strong> #{{ order.pk }}</p>

        <p><strong>User:</strong>
            {% if order.user.first_name %}
                {{ order.user.first_name }} {{ order.user.last_name }}
            {% else %}
                {{ order.user.username }}
            {% endif %}
        </p>

        <p><strong>Created:</strong> {{ order.created_at }}</p>

        <p><strong>Products in order:</strong></p>
        {% if order.products.all %}
            <ul>
                {% for product in order.products.all %}
                    <li>{{ product.name }} - ${{ product.price }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p><em>No products in this order</em></p>
        {% endif %}
    </div>

    <p style="color: #d32f2f; font-weight: bold;">
        This action cannot be undone. The order will be permanently deleted from the database.
    </p>
</div>

<form method="post">
    {% csrf_token %}
    <div>
        <button type="submit" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; cursor: pointer;">
            Yes, Delete Order
        </button>
        <a href="{% url 'shopapp:order_detail' pk=order.pk %}" style="margin-left: 10px; padding: 10px 20px; background-color: #4caf50; color: white; text-decoration: none;">
            Cancel
        </a>
    </div>
</form>

{% endblock %}
